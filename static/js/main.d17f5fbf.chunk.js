(this.webpackJsonpform_sajilo=this.webpackJsonpform_sajilo||[]).push([[0],{246:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(8),r=a.n(n),i=a(13),s=a(11),l=a(16),o=a(18),j=a(278),u=a(279),b=a(280),d=a(61),O=a(281),h=a(3),m=["name"],x=function(e){var t=e.name,a=Object(d.a)(e,m),c=Object(o.c)(t),n=Object(s.a)(c,2),r=n[0],l=n[1],j=Object(i.a)(Object(i.a)(Object(i.a)({},r),a),{},{fullWidth:!0,variant:"outlined",autoComplete:"off"});return l&&l.touched&&l.error&&(j.error=!0,j.helperText=l.error),Object(h.jsx)(O.a,Object(i.a)({},j))},f=a(282),p=["name","options","disabled","searchDistrict","setsearchDistrict"],v=function(e){var t=e.name,a=e.options,c=e.disabled,n=e.searchDistrict,r=e.setsearchDistrict,l=Object(d.a)(e,p),j=Object(o.d)().setFieldValue,u=Object(o.c)(t),b=Object(s.a)(u,2),m=b[0],x=b[1],v=Object(i.a)(Object(i.a)(Object(i.a)({},m),l),{},{select:!0,variant:"outlined",fullWidth:!0,onChange:function(e){var a=e.target.value;if(j(t,a),""===n)return r(a)},disabled:c});return x&&x.touched&&x.error&&(v.error=!0,v.helperText=x.error),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(O.a,Object(i.a)(Object(i.a)({},v),{},{children:Object.keys(a).map((function(e,t){return Object(h.jsx)(f.a,{value:a[e],children:a[e]},t)}))}))})},g=a(30),S=a.n(g),_=function(e){var t=e.next,a=e.data,n=e.validate,r=Object(c.useState)([]),i=Object(s.a)(r,2),d=i[0],O=i[1],m=Object(c.useState)(a.payout_district),f=Object(s.a)(m,2),p=f[0],g=f[1],_=Object(c.useState)([a.select_agent]),y=Object(s.a)(_,2),q=y[0],E=y[1],T=Object(c.useState)(a.amount),F=Object(s.a)(T,2),P=F[0],R=F[1],D=Object(c.useState)(a.total),k=Object(s.a)(D,2),A=k[0],C=k[1],N=Object(c.useState)(!1),B=Object(s.a)(N,2),I=B[0],M=B[1];Object(c.useEffect)((function(){S.a.get("http://192.168.190.128:8000/api/bmt/district/").then((function(e){O(e.data.district)})).catch((function(e){return e.message}))}),[]),Object(c.useEffect)((function(){S.a.get("http://192.168.190.128:8000/api/bmt/agent/").then((function(e){e.data.agent.map((function(e){e[e.length-1]===p&&E((function(t){return[].concat(Object(l.a)(t),[e])}))}))})).catch((function(e){return e.message}))}),[p]),Object(c.useEffect)((function(){var e=parseInt(P,10),t=e+e/100*10;C(t),S.a.get("http://192.168.190.128:8000/api/bmt/balance/").then((function(e){e.data.data.wallet.balance>=t&&t>0?M(!0):M(!1)})).catch((function(e){return e.message}))}),[P]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Step one"}),Object(h.jsx)(o.b,{initialValues:a,validationSchema:n,onSubmit:function(e){e.amount=P,e.total=A,e.charge=A-P,t(e)},children:Object(h.jsx)(o.a,{children:Object(h.jsxs)(j.a,{container:!0,direction:"column",spacing:2,children:[Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"payout_district",label:"Select District",options:d,searchDistrict:p,setsearchDistrict:g})}),""===p?Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"select_agent",label:"Select Agent",options:q,disabled:!0})}):Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"select_agent",label:"Select Agent",options:q})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(x,{value:P,onChange:function(e){(""===e.target.value||/^[0-9]+$/.test(e.target.value))&&R(e.target.value)},name:"amount",type:"number",label:"Amount"})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(x,{value:A-P,name:"charge",label:"Charge",disabled:!0})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(x,{value:A,name:"total",label:"Total",disabled:!0})}),!0===I||0===A?"":Object(h.jsx)(u.a,{color:"secondary",children:"Insufficient Balance"}),console.log(I),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(b.a,{disabled:!I,variant:"contained",color:"secondary",type:"submit",children:"Next"})})]})})})]})},y=["Education Expenses","EMI Payment","Business Loan Or Interest Payment","Medical Expenses","Professional Services","Rent Payment","Repai And Maintenance","Salary","Utility Payments","Other"],q=["Spouse","Mother","Father","Brother","Friend","Relatives"],E=function(e){var t=e.next,a=e.prev,n=e.data,r=e.validate,i=Object(c.useState)({}),l=Object(s.a)(i,2),u=l[0],d=l[1];Object(c.useEffect)((function(){S.a.get("http://192.168.190.128:8000/api/bmt/balance/").then((function(e){d(e.data.data.user_kyc),console.log(u)})).catch((function(e){return e.message}))}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Step two"}),Object(h.jsx)(o.b,{initialValues:n,validationSchema:r,onSubmit:function(e){e.sender=u,console.log(e),t(e,!0)},children:function(e){var t=e.values;return Object(h.jsx)(o.a,{children:Object(h.jsxs)(j.a,{container:!0,direction:"column",spacing:2,children:[Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(x,{name:"receiver_name",label:"Receiver Name"})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(x,{name:"receiver_address",label:"Receiver Address"})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(x,{name:"receiver_number",label:"Receiver Number"})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"relation",label:"Select Relation",options:q})}),Object(h.jsx)(j.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"purpose",label:"Select Purpose",options:y})}),Object(h.jsxs)(j.a,{xs:6,item:!0,children:[Object(h.jsx)(b.a,{style:{marginRight:"20px"},variant:"contained",onClick:function(){return a(t)},type:"button",children:"Back"}),Object(h.jsx)(b.a,{variant:"contained",type:"submit",children:"Next"})]})]})})}})]})},T=function(e){var t=e.success;return void 0===t?Object(h.jsx)("div",{}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{children:["Message : ",t[1]]}),Object(h.jsxs)("h1",{children:["Control Number : ",t[2]]}),Object(h.jsxs)("h1",{children:["Total Amount : ",t[3]]})]})},F=a(19),P=function(){var e=Object(c.useState)({payout_district:"",select_agent:"",amount:0,charge:0,total:0,receiver_name:"",receiver_address:"",receiver_number:"",relation:"",purpose:"",sender:{}}),t=Object(s.a)(e,2),a=t[0],n=t[1],r=F.c().shape({payout_district:F.d().required("This field is required"),select_agent:F.a().required("This field is required"),amount:F.b().required("This field is required")}),l=F.c().shape({receiver_name:F.d().required("This field is required").min(7,"Enter Full Name"),receiver_address:F.d().required("This field is required"),receiver_number:F.d().required("This field is required").max(10,"Enter valid number").min(10,"Enter valid number"),relation:F.d().required("Please select relation"),purpose:F.d().required("Please select remitance purpose")}),o=Object(c.useState)(0),j=Object(s.a)(o,2),u=j[0],b=j[1],d=Object(c.useState)(),O=Object(s.a)(d,2),m=O[0],x=O[1],f=function(e){S.a.post("http://192.168.190.128:8000/api/bmt/execute/",e).then((function(e){x(e.data.message)})),console.log("Form submitted",e)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n((function(t){return Object(i.a)(Object(i.a)({},t),e)})),t&&f(e),b((function(e){return e+1}))};console.log(m);var v=[Object(h.jsx)(_,{data:a,validate:r,next:p}),Object(h.jsx)(E,{data:a,validate:l,prev:function(e){n((function(t){return Object(i.a)(Object(i.a)({},t),e)})),b((function(e){return e-1}))},next:p}),Object(h.jsx)(T,{success:m})];return Object(h.jsx)(h.Fragment,{children:v[u]})};r.a.render(Object(h.jsx)(P,{}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.d17f5fbf.chunk.js.map