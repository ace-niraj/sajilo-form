(this.webpackJsonpform_sajilo=this.webpackJsonpform_sajilo||[]).push([[0],{246:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(8),r=a.n(c),i=a(11),s=a(280),j=a(13),l=a(16),o=a(18),u=a(278),b=a(279),d=a(62),O=a(281),m=a(2),h=["name"],x=function(e){var t=e.name,a=Object(d.a)(e,h),n=Object(o.c)(t),c=Object(i.a)(n,2),r=c[0],s=c[1],l=Object(j.a)(Object(j.a)(Object(j.a)({},r),a),{},{fullWidth:!0,variant:"outlined",autoComplete:"off"});return s&&s.touched&&s.error&&(l.error=!0,l.helperText=s.error),Object(m.jsx)(O.a,Object(j.a)({},l))},p=a(282),f=["name","options","disabled","searchDistrict","setsearchDistrict"],v=function(e){var t=e.name,a=e.options,n=e.disabled,c=e.searchDistrict,r=e.setsearchDistrict,s=Object(d.a)(e,f),l=Object(o.d)().setFieldValue,u=Object(o.c)(t),b=Object(i.a)(u,2),h=b[0],x=b[1],v=Object(j.a)(Object(j.a)(Object(j.a)({},h),s),{},{select:!0,variant:"outlined",fullWidth:!0,onChange:function(e){var a=e.target.value;if(l(t,a),""===c)return r(a)},disabled:n});return x&&x.touched&&x.error&&(v.error=!0,v.helperText=x.error),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(O.a,Object(j.a)(Object(j.a)({},v),{},{children:Object.keys(a).map((function(e,t){return Object(m.jsx)(p.a,{value:a[e],children:a[e]},t)}))}))})},g=a(30),y=a.n(g),S=function(e){var t=e.next,a=e.data,c=e.validate,r=Object(n.useState)([]),j=Object(i.a)(r,2),d=j[0],O=j[1],h=Object(n.useState)(a.payout_district),p=Object(i.a)(h,2),f=p[0],g=p[1],S=Object(n.useState)([a.select_agent]),_=Object(i.a)(S,2),E=_[0],q=_[1],F=Object(n.useState)(a.amount),R=Object(i.a)(F,2),C=R[0],P=R[1],k=Object(n.useState)(a.total),N=Object(i.a)(k,2),D=N[0],M=N[1],T=Object(n.useState)(!1),A=Object(i.a)(T,2),B=A[0],w=A[1];Object(n.useEffect)((function(){y.a.get("https://remittance.sajilopay.com.np/api/bmt/district/").then((function(e){O(e.data.district)})).catch((function(e){return e.message}))}),[]),Object(n.useEffect)((function(){y.a.get("https://remittance.sajilopay.com.np/api/bmt/agent/").then((function(e){e.data.agent.map((function(e){e[e.length-1]===f&&q((function(t){return[].concat(Object(l.a)(t),[e])}))}))})).catch((function(e){return e.message}))}),[f]),Object(n.useEffect)((function(){var e=parseInt(C,10),t=e+e/100*10;M(t),y.a.get("https://remittance.sajilopay.com.np/api/bmt/balance/").then((function(e){e.data.data.wallet.balance>=t&&t>0?w(!0):w(!1)})).catch((function(e){return e.message}))}),[C]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Step one"}),Object(m.jsx)(o.b,{initialValues:a,validationSchema:c,onSubmit:function(e){e.amount=C,e.total=D,e.charge=D-C,t(e)},children:Object(m.jsx)(o.a,{children:Object(m.jsxs)(u.a,{container:!0,direction:"column",spacing:2,children:[Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(v,{name:"payout_district",label:"Select District",options:d,searchDistrict:f,setsearchDistrict:g})}),""===f?Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(v,{name:"select_agent",label:"Select Agent",options:E,disabled:!0})}):Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(v,{name:"select_agent",label:"Select Agent",options:E})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(x,{value:C,onChange:function(e){(""===e.target.value||/^[0-9]+$/.test(e.target.value))&&P(e.target.value)},name:"amount",type:"number",label:"Amount"})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(x,{value:D-C,name:"charge",label:"Charge",disabled:!0})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(x,{value:D,name:"total",label:"Total",disabled:!0})}),!0===B||0===D?"":Object(m.jsx)(b.a,{color:"secondary",children:"Insufficient Balance"}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(s.a,{disabled:!B,variant:"contained",color:"secondary",type:"submit",children:"Next"})})]})})})]})},_=["Education Expenses","EMI Payment","Business Loan Or Interest Payment","Medical Expenses","Professional Services","Rent Payment","Repai And Maintenance","Salary","Utility Payments","Other"],E=["Spouse","Mother","Father","Brother","Friend","Relatives"],q=function(e){var t=e.next,a=e.prev,c=e.data,r=e.validate,j=Object(n.useState)({}),l=Object(i.a)(j,2),b=l[0],d=l[1];Object(n.useEffect)((function(){y.a.get("https://remittance.sajilopay.com.np/api/bmt/balance/").then((function(e){d(e.data.data.user_kyc)})).catch((function(e){return e.message}))}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Step two"}),Object(m.jsx)(o.b,{initialValues:c,validationSchema:r,onSubmit:function(e){e.sender=b,t(e,!0)},children:function(e){var t=e.values;return Object(m.jsx)(o.a,{children:Object(m.jsxs)(u.a,{container:!0,direction:"column",spacing:2,children:[Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(x,{name:"receiver_name",label:"Receiver Name"})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(x,{name:"receiver_address",label:"Receiver Address"})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(x,{name:"receiver_number",label:"Receiver Number"})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(v,{name:"relation",label:"Select Relation",options:E})}),Object(m.jsx)(u.a,{xs:6,item:!0,children:Object(m.jsx)(v,{name:"purpose",label:"Select Purpose",options:_})}),Object(m.jsxs)(u.a,{xs:6,item:!0,children:[Object(m.jsx)(s.a,{style:{marginRight:"20px"},variant:"contained",onClick:function(){return a(t)},type:"button",children:"Back"}),Object(m.jsx)(s.a,{variant:"contained",type:"submit",children:"Next"})]})]})})}})]})},F=function(e){var t=e.success;return void 0===t?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("h1",{children:["Message : ",t[1]]}),Object(m.jsxs)("h1",{children:["Control Number : ",t[2]]}),Object(m.jsxs)("h1",{children:["Total Amount : ",t[3]]})]})},R=a(19),C=function(){var e=Object(n.useState)({payout_district:"",select_agent:"",amount:0,charge:0,total:0,receiver_name:"",receiver_address:"",receiver_number:"",relation:"",purpose:"",sender:{}}),t=Object(i.a)(e,2),a=t[0],c=t[1],r=R.c().shape({payout_district:R.d().required("Please select district"),select_agent:R.a().required("This field is required"),amount:R.b().required("Enter amount in NRS")}),s=R.c().shape({receiver_name:R.d().required("This field is required").min(7,"Enter Full Name"),receiver_address:R.d().required("Receiver address is required"),receiver_number:R.d().required("Receiver Number cannot be empty").max(10,"Enter valid number").min(10,"Enter valid number"),relation:R.d().required("Please select relation"),purpose:R.d().required("Please select remitance purpose")}),l=Object(n.useState)(0),o=Object(i.a)(l,2),u=o[0],b=o[1],d=Object(n.useState)(),O=Object(i.a)(d,2),h=O[0],x=O[1],p=function(e){y.a.post("https://remittance.sajilopay.com.np/api/bmt/execute/",e).then((function(e){x(e.data.message)})),console.log("Form submitted",e)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c((function(t){return Object(j.a)(Object(j.a)({},t),e)})),t&&p(e),b((function(e){return e+1}))},v=[Object(m.jsx)(S,{data:a,validate:r,next:f}),Object(m.jsx)(q,{data:a,validate:s,prev:function(e){c((function(t){return Object(j.a)(Object(j.a)({},t),e)})),b((function(e){return e-1}))},next:f}),Object(m.jsx)(F,{success:h})];return Object(m.jsx)(m.Fragment,{children:v[u]})},P=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(m.jsx)(m.Fragment,{children:function(){switch(a){case 1:return Object(m.jsx)(C,{});case 2:return Object(m.jsx)("h4",{children:"Under Maintanance!!!"});default:return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.a,{onClick:function(){return c(1)},variant:"outlined",children:"BMT"}),Object(m.jsx)(s.a,{style:{marginLeft:"20px"},onClick:function(){return c(2)},variant:"outlined",children:"City Express"})]})}}()})};r.a.render(Object(m.jsx)(P,{}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.fa0ba139.chunk.js.map