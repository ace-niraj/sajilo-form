(this.webpackJsonpform_sajilo=this.webpackJsonpform_sajilo||[]).push([[0],{246:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a(8),c=a.n(n),r=a(11),s=a(280),j=a(13),l=a(16),o=a(18),b=a(278),u=a(279),d=a(62),O=a(281),h=a(2),m=["name"],x=function(e){var t=e.name,a=Object(d.a)(e,m),i=Object(o.c)(t),n=Object(r.a)(i,2),c=n[0],s=n[1],l=Object(j.a)(Object(j.a)(Object(j.a)({},c),a),{},{fullWidth:!0,variant:"outlined",autoComplete:"off"});return s&&s.touched&&s.error&&(l.error=!0,l.helperText=s.error),Object(h.jsx)(O.a,Object(j.a)({},l))},f=a(282),p=["name","options","disabled","searchDistrict","setsearchDistrict"],v=function(e){var t=e.name,a=e.options,i=e.disabled,n=e.searchDistrict,c=e.setsearchDistrict,s=Object(d.a)(e,p),l=Object(o.d)().setFieldValue,b=Object(o.c)(t),u=Object(r.a)(b,2),m=u[0],x=u[1],v=Object(j.a)(Object(j.a)(Object(j.a)({},m),s),{},{select:!0,variant:"outlined",fullWidth:!0,onChange:function(e){var a=e.target.value;if(l(t,a),""===n)return c(a)},disabled:i});return x&&x.touched&&x.error&&(v.error=!0,v.helperText=x.error),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(O.a,Object(j.a)(Object(j.a)({},v),{},{children:Object.keys(a).map((function(e,t){return Object(h.jsx)(f.a,{value:a[e],children:a[e]},t)}))}))})},N=a(30),J=a.n(N),g=function(e){var t=e.next,a=e.data,n=e.validate,c=Object(i.useState)([]),j=Object(r.a)(c,2),d=j[0],O=j[1],m=Object(i.useState)(a.payout_district),f=Object(r.a)(m,2),p=f[0],N=f[1],g=Object(i.useState)([a.select_agent]),I=Object(r.a)(g,2),y=I[0],z=I[1],E=Object(i.useState)(a.amount),A=Object(r.a)(E,2),S=A[0],_=A[1],k=Object(i.useState)(a.total),M=Object(r.a)(k,2),R=M[0],X=M[1],D=Object(i.useState)(!1),L=Object(r.a)(D,2),T=L[0],F=L[1];Object(i.useEffect)((function(){var e={headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjI1NjU5NzEyLCJqdGkiOiJiODk0MmY3N2E5NzE0OTM2OGY5NTg2MTRjM2E4ODczYyIsInVzZXJfaWQiOjR9.LNvuLVf_lJ-sJDoFt4xGfAlR8g_A6Fbbz2kAI5b4WSk")}};J.a.get("https://remittance.sajilopay.com.np/api/bmt/district/",e).then((function(e){O(e.data.district)})).catch((function(e){return e.message}))}),[]),Object(i.useEffect)((function(){var e={headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjI1NjU5NzEyLCJqdGkiOiJiODk0MmY3N2E5NzE0OTM2OGY5NTg2MTRjM2E4ODczYyIsInVzZXJfaWQiOjR9.LNvuLVf_lJ-sJDoFt4xGfAlR8g_A6Fbbz2kAI5b4WSk")}};J.a.get("https://remittance.sajilopay.com.np/api/bmt/agent/",e).then((function(e){e.data.agent.map((function(e){e[e.length-1]===p&&z((function(t){return[].concat(Object(l.a)(t),[e])}))}))})).catch((function(e){return e.message}))}),[p]),Object(i.useEffect)((function(){var e=parseInt(S,10),t=e+e/100*10;X(t);var a={headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjI1NjU5NzEyLCJqdGkiOiJiODk0MmY3N2E5NzE0OTM2OGY5NTg2MTRjM2E4ODczYyIsInVzZXJfaWQiOjR9.LNvuLVf_lJ-sJDoFt4xGfAlR8g_A6Fbbz2kAI5b4WSk")}};J.a.get("https://remittance.sajilopay.com.np/api/bmt/balance/",a).then((function(e){e.data.data.wallet.balance>=t&&t>0?F(!0):F(!1)})).catch((function(e){return e.message}))}),[S]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Step one"}),Object(h.jsx)(o.b,{initialValues:a,validationSchema:n,onSubmit:function(e){e.amount=S,e.total=R,e.charge=R-S,t(e)},children:Object(h.jsx)(o.a,{children:Object(h.jsxs)(b.a,{container:!0,direction:"column",spacing:2,children:[Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"payout_district",label:"Select District",options:d,searchDistrict:p,setsearchDistrict:N})}),""===p?Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"select_agent",label:"Select Agent",options:y,disabled:!0})}):Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"select_agent",label:"Select Agent",options:y})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(x,{value:S,onChange:function(e){(""===e.target.value||/^[0-9]+$/.test(e.target.value))&&_(e.target.value)},name:"amount",type:"number",label:"Amount"})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(x,{value:R-S,name:"charge",label:"Charge",disabled:!0})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(x,{value:R,name:"total",label:"Total",disabled:!0})}),!0===T||0===R?"":Object(h.jsx)(u.a,{color:"secondary",children:"Insufficient Balance"}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(s.a,{disabled:!T,variant:"contained",color:"secondary",type:"submit",children:"Next"})})]})})})]})},I=["Education Expenses","EMI Payment","Business Loan Or Interest Payment","Medical Expenses","Professional Services","Rent Payment","Repai And Maintenance","Salary","Utility Payments","Other"],y=["Spouse","Mother","Father","Brother","Friend","Relatives"],z=function(e){var t=e.next,a=e.prev,n=e.data,c=e.validate,j=Object(i.useState)({}),l=Object(r.a)(j,2),u=l[0],d=l[1];Object(i.useEffect)((function(){var e={headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjI1NjU5NzEyLCJqdGkiOiJiODk0MmY3N2E5NzE0OTM2OGY5NTg2MTRjM2E4ODczYyIsInVzZXJfaWQiOjR9.LNvuLVf_lJ-sJDoFt4xGfAlR8g_A6Fbbz2kAI5b4WSk")}};J.a.get("https://remittance.sajilopay.com.np/api/bmt/balance/",e).then((function(e){d(e.data.data.user_kyc)})).catch((function(e){return e.message}))}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Step two"}),Object(h.jsx)(o.b,{initialValues:n,validationSchema:c,onSubmit:function(e){e.sender=u,t(e,!0)},children:function(e){var t=e.values;return Object(h.jsx)(o.a,{children:Object(h.jsxs)(b.a,{container:!0,direction:"column",spacing:2,children:[Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(x,{name:"receiver_name",label:"Receiver Name"})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(x,{name:"receiver_address",label:"Receiver Address"})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(x,{name:"receiver_number",label:"Receiver Number"})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"relation",label:"Select Relation",options:y})}),Object(h.jsx)(b.a,{xs:6,item:!0,children:Object(h.jsx)(v,{name:"purpose",label:"Select Purpose",options:I})}),Object(h.jsxs)(b.a,{xs:6,item:!0,children:[Object(h.jsx)(s.a,{style:{marginRight:"20px"},variant:"contained",onClick:function(){return a(t)},type:"button",children:"Back"}),Object(h.jsx)(s.a,{variant:"contained",type:"submit",children:"Next"})]})]})})}})]})},E=function(e){var t=e.success;return void 0===t?Object(h.jsx)("div",{}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{children:["Message : ",t[1]]}),Object(h.jsxs)("h1",{children:["Control Number : ",t[2]]}),Object(h.jsxs)("h1",{children:["Total Amount : ",t[3]]})]})},A=a(19),S=function(){var e=Object(i.useState)({payout_district:"",select_agent:"",amount:0,charge:0,total:0,receiver_name:"",receiver_address:"",receiver_number:"",relation:"",purpose:"",sender:{}}),t=Object(r.a)(e,2),a=t[0],n=t[1],c=A.c().shape({payout_district:A.d().required("Please select district"),select_agent:A.a().required("This field is required"),amount:A.b().required("Enter amount in NRS")}),s=A.c().shape({receiver_name:A.d().required("This field is required").min(7,"Enter Full Name"),receiver_address:A.d().required("Receiver address is required"),receiver_number:A.d().required("Receiver Number cannot be empty").max(10,"Enter valid number").min(10,"Enter valid number"),relation:A.d().required("Please select relation"),purpose:A.d().required("Please select remitance purpose")}),l=Object(i.useState)(0),o=Object(r.a)(l,2),b=o[0],u=o[1],d=Object(i.useState)(),O=Object(r.a)(d,2),m=O[0],x=O[1],f=function(e){var t={headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjI1NjU5NzEyLCJqdGkiOiJiODk0MmY3N2E5NzE0OTM2OGY5NTg2MTRjM2E4ODczYyIsInVzZXJfaWQiOjR9.LNvuLVf_lJ-sJDoFt4xGfAlR8g_A6Fbbz2kAI5b4WSk")}};J.a.post("https://remittance.sajilopay.com.np/api/bmt/execute/",e,t).then((function(e){x(e.data.message)})),console.log("Form submitted",e)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n((function(t){return Object(j.a)(Object(j.a)({},t),e)})),t&&f(e),u((function(e){return e+1}))},v=[Object(h.jsx)(g,{data:a,validate:c,next:p}),Object(h.jsx)(z,{data:a,validate:s,prev:function(e){n((function(t){return Object(j.a)(Object(j.a)({},t),e)})),u((function(e){return e-1}))},next:p}),Object(h.jsx)(E,{success:m})];return Object(h.jsx)(h.Fragment,{children:v[b]})},_=function(){var e=Object(i.useState)(null),t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(h.jsx)(h.Fragment,{children:function(){switch(a){case 1:return Object(h.jsx)(S,{});case 2:return Object(h.jsx)("h4",{children:"Under Maintanance!!!"});default:return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.a,{onClick:function(){return n(1)},variant:"outlined",children:"BMT"}),Object(h.jsx)(s.a,{style:{marginLeft:"20px"},onClick:function(){return n(2)},variant:"outlined",children:"City Express"})]})}}()})};c.a.render(Object(h.jsx)(_,{}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.f0d88a98.chunk.js.map